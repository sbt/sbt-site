<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="sbt-site">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="sbt-site">
<link rel="shortcut icon" href="img/favicon.png">
<title>Publishing Â· sbt-site</title>
<link rel="stylesheet" href="assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="lib/prettify/prettify.css">
<script src="assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="assets/fonts/font-awesome.css">
<link rel="stylesheet" href="assets/fonts/material-icons.css">
<link rel="stylesheet" href="assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="index.html" title="sbt-site" class="md-header-nav__button md-logo">
<img src="img/sbt-logo.svg" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
sbt-site
</span>
<span class="md-header-nav__topic">
Publishing
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/sbt/sbt-site"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
sbt/sbt-site
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="index.html" title="sbt-site" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<img src="img/sbt-logo.svg" width="24" height="24">
</a>
<a href="index.html" title="sbt-site">
sbt-site
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/sbt/sbt-site"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
sbt/sbt-site
</div>
</a>

</div>
<ul>
  <li><a href="getting-started.html" class="page">Getting Started</a></li>
  <li><a href="preprocess.html" class="page">Preprocessing</a></li>
  <li><a href="api-documentation.html" class="page">API documentation</a></li>
  <li><a href="generators/index.html" class="page">Site Generators</a>
  <ul>
    <li><a href="generators/asciidoctor.html" class="page">Asciidoctor</a></li>
    <li><a href="generators/gitbook.html" class="page">GitBook</a></li>
    <li><a href="generators/hugo.html" class="page">Hugo</a></li>
    <li><a href="generators/jekyll.html" class="page">Jekyll</a></li>
    <li><a href="generators/laika.html" class="page">Laika</a></li>
    <li><a href="generators/nanoc.html" class="page">Nanoc</a></li>
    <li><a href="generators/pamflet.html" class="page">Pamflet</a></li>
    <li><a href="generators/paradox.html" class="page">Paradox</a></li>
    <li><a href="generators/sphinx.html" class="page">Sphinx</a></li>
  </ul></li>
  <li><a href="publishing.html" class="active page">Publishing</a></li>
  <li><a href="advanced-usage.html" class="page">Advanced Usage</a></li>
  <li><a href="migration-guide.html" class="page">Migration Guide</a></li>
  <li><a href="notes/index.html" class="page">Release Notes</a>
  <ul>
    <li><a href="notes/1.4.0.html" class="page">Release 1.4.0</a></li>
    <li><a href="notes/1.3.3.html" class="page">Release 1.3.3</a></li>
    <li><a href="notes/1.3.2.html" class="page">Release 1.3.3</a></li>
    <li><a href="notes/1.3.1.html" class="page">Release 1.3.1</a></li>
    <li><a href="notes/1.3.0.html" class="page">Release 1.3.0</a></li>
    <li><a href="notes/1.2.1.html" class="page">Release 1.2.1</a></li>
    <li><a href="notes/1.2.0.html" class="page">Release 1.2.0</a></li>
    <li><a href="notes/1.1.0.html" class="page">Release 1.1.0</a></li>
    <li><a href="notes/1.0.0.html" class="page">Release 1.0.0</a></li>
    <li><a href="notes/0.8.2.html" class="page">Release 0.8.2</a></li>
    <li><a href="notes/release-process.html" class="page">Release Process for <code>sbt-site</code></a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="publishing.html#publishing" class="header">Publishing</a>
  <ul>
    <li><a href="publishing.html#publishing-to-github-pages-using-sbt-ghpages" class="header">Publishing to GitHub Pages using sbt-ghpages</a></li>
    <li><a href="publishing.html#publishing-to-github-pages-from-travis-ci" class="header">Publishing to GitHub Pages from Travis CI</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 1.4.1
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="publishing.html#publishing" class="header">Publishing</a>
  <ul>
    <li><a href="publishing.html#publishing-to-github-pages-using-sbt-ghpages" class="header">Publishing to GitHub Pages using sbt-ghpages</a></li>
    <li><a href="publishing.html#publishing-to-github-pages-from-travis-ci" class="header">Publishing to GitHub Pages from Travis CI</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#publishing" name="publishing" class="anchor"><span class="anchor-link"></span></a>Publishing</h1>
<p>The following sections show you how to configure publishing of your site. To publish a generated site to <a href="https://pages.github.com">GitHub Pages</a> you can use the <a href="https://github.com/sbt/sbt-ghpages">sbt-ghpages</a> plugin. For sites hosted on S3 one option is to use <a href="https://github.com/sbt/sbt-s3">sbt-s3</a>. We expect other publishing mechanisms to be supported in the future.</p>
<h2><a href="#publishing-to-github-pages-using-sbt-ghpages" name="publishing-to-github-pages-using-sbt-ghpages" class="anchor"><span class="anchor-link"></span></a>Publishing to GitHub Pages using sbt-ghpages</h2>
<p>Set up the plugin by adding the following to <code>project/plugins.sbt</code> (check the <a href="https://github.com/sbt/sbt-ghpages">sbt-ghpages project</a> for the most recent version).</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/sbt/sbt-site/tree/v1.4.1/project/plugins.sbt#L4" target="_blank" title="Go to snippet source"></a><code class="language-sbt">addSbtPlugin(&quot;com.typesafe.sbt&quot; % &quot;sbt-ghpages&quot; % &quot;0.6.3&quot;)</code></pre>
<p>Then configure your sbt build to use a special remote when running on Travis CI and otherwise fall back to the normal Git remote configured via the <code>scmInfo</code> setting.</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/sbt/sbt-site/tree/v1.4.1/build.sbt#L16" target="_blank" title="Go to snippet source"></a><code class="language-sbt">scmInfo := Some(ScmInfo(url(&quot;https://github.com/sbt/sbt-site&quot;), &quot;scm:git:git@github.com:sbt/sbt-site.git&quot;))
enablePlugins(GhpagesPlugin)
git.remoteRepo := scmInfo.value.get.connection.replace(&quot;scm:git:&quot;, &quot;&quot;)</code></pre>
<p>At this point you should be able to run <code>sbt ghpagesPushSite</code> to publish your site.</p><div class="callout note "><div class="callout-title">Note</div>
<p>Before running <code>sbt ghpagesPushSite</code> the first time you need to create the <code>gh-pages</code> branch. One way to do it is to build your site and publish a first version of it using the following commands:</p>
<pre class="prettyprint"><code class="language-sh">$ sbt clean make-site                             # &lt;1&gt; Build the site
$ origin=$(git remote get-url origin)             # &lt;2&gt; Save the current remote for later
$ cd target/site
$ git init                                        # &lt;3&gt; Create site repo and add initial content
$ git add .
$ git commit -m &quot;Initial import of GitHub Pages&quot;
$ git push --force &quot;$origin&quot; master:gh-pages      # &lt;4&gt; Publish the repo&#39;s master branch as gh-pages
</code></pre></div>
<h2><a href="#publishing-to-github-pages-from-travis-ci" name="publishing-to-github-pages-from-travis-ci" class="anchor"><span class="anchor-link"></span></a>Publishing to GitHub Pages from Travis CI</h2>
<p>The following section walks you through the steps to configure Travis CI to publish your site as part of the <a href="https://docs.travis-ci.com/user/deployment">deployment process</a>. It assumes that you have already configured your sbt project to publish your site using the sbt-ghpages plugin as described in the previous section.</p><div class="callout warning "><div class="callout-title">Security Considerations</div>
<p>The authentication mechanism that enables Travis CI to update the <code>gh-pages</code> branch requires that write access to your GitHub project is granted to an SSH key pair that you control. An encrypted version of the secret key must be added to the Git repository in order for Travis CI to decrypt it and make it available for pushing to your Git repository. This means that anyone with the ability to modify the Travis CI or sbt build configuration will be able to get hold of the secret key and gain write access to your GitHub repository. For this reason it is recommented to disable publishing for pull requests.</p>
<p>The instructions are based on <a href="https://gist.github.com/domenic/ec8b0fc8ab45f39403dd">this gist</a> and you are encouraged to consult the reasons for choosing this authentication mechanism.</p></div>
<p>To authenticate Travis CI to publish changes to the <code>gh-pages</code> branch you need to first generate an SSH key pair:</p>
<pre class="prettyprint"><code class="language-sh">$ ssh-keygen -t rsa -b 4096 -C &quot;sbt-site@travis&quot; -f project/travis-deploy-key
</code></pre>
<p>Add the public key found in <code>project/travis-deploy-key.pub</code> as a deploy key in the <strong>Deploy Keys</strong> section of your GitHub project&rsquo;s settings page at <a href="https://github.com/[org]/[repo]/settings/keys">https://github.com/[org]/[repo]/settings/keys</a>. Make sure you allow write access for the deploy key by clicking the check box.</p>
<p><img src="img/add-travis-deploy-key.png" alt="Add the Travis SSH Deploy Key" /></p>
<p>Prepare the secret key for inclusion in the repository by opening a terminal and encrypting the secret key file using the Travis CLI:</p>
<pre class="prettyprint"><code class="nocode">$ gem install travis
$ travis encrypt-file project/travis-deploy-key project/travis-deploy-key.enc
encrypting project/travis-deploy-key for [org]/[repo]
storing result as project/travis-deploy-key.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

    openssl aes-256-cbc -K $encrypted_3afbfedfa397_key -iv $encrypted_3afbfedfa397_iv -in project/travis-deploy-key.enc -out project/travis-deploy-key -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add project/travis-deploy-key.enc to the git repository.
Make sure not to add project/travis-deploy-key to the git repository.
Commit all changes to your .travis.yml.
</code></pre>
<p>As instructed in the output of the command add the encrypted secret key found in <code>project/travis-deploy-key.enc</code> to the repository and delete or ignore the unencrypted secret key file.</p>
<pre><code>$ git add project/travis-deploy-key.enc
$ echo project/travis-deploy-key &gt;&gt; .git/info/exclude
</code></pre>
<p>Finally, configure a deploy step in <code>.travis.yml</code> using the script provider. For a complete set of options and triggers see the <a href="https://docs.travis-ci.com/user/deployment">Travis deployment documentation</a>. In this example, we publishing when a tag is created and explicitly disable publishing for pull request. The <code>before_deploy</code> step takes care of setting up the environment so that <code>git push</code> automatically finds the deploy key.</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/sbt/sbt-site/tree/v1.4.1/.travis.yml#L49-L66" target="_blank" title="Go to snippet source"></a><code class="language-yml">before_deploy:
  # Record minimal build information via the Git user ident
  - git config --global user.name &quot;$USER&quot;
  - git config --global user.email &quot;$TRAVIS_BUILD_NUMBER@$TRAVIS_COMMIT&quot;
  # Decrypt the secret deploy key using instructions from `travis encrypt-file`
  - openssl aes-256-cbc -K $encrypted_3afbfedfa397_key -iv $encrypted_3afbfedfa397_iv -in project/travis-deploy-key.enc -out project/travis-deploy-key -d
  - chmod 600 project/travis-deploy-key
  # Start ssh-agent in the background and load the deploy key
  - eval &quot;$(ssh-agent -s)&quot;
  - ssh-add project/travis-deploy-key

deploy:
  provider: script
  script: sbt ghpagesPushSite
  skip_cleanup: true
  on:
    tags: true
    condition: $TRAVIS_PULL_REQUEST = false &amp;&amp; $SBT_CROSS_VERSION = 1.1*</code></pre><div class="callout note "><div class="callout-title">Note</div>
<p>Ensure that you modify the above example to use the instructions on how to decrypt the deploy key provided in the output of the <code>travis encrypt-file</code> command.</p>
<p>At this point, it would also be a good idea to run <code>travis lint</code> to check that the resulting <code>.travis.yml</code> is correct.</p></div>
</div>
<div>
<a href="https://github.com/sbt/sbt-site/tree/v1.4.1/src/main/paradox/publishing.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
1.4.1
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="generators/sphinx.html" title="Sphinx" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Sphinx
</span>
</div>
</a>
<a href="advanced-usage.html" title="Advanced Usage" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Advanced Usage
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="assets/javascripts/application.583bbe55.js"></script>
<script src="assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"."}})</script>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
